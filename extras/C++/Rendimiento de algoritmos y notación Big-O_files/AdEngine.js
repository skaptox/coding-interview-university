function CargarAnuncio(e,t,n){if(!ads.anuncios){console.log("No se han cargado datos sobre anuncios!!");return}if(!ads.anuncios.length){console.log("No existen definiciones de anuncios!!");return}if(!document.getElementById(e)){console.log("No existe el elemento en el que insertar el anuncio!!");return}arrTags=t.split(",");arrCategs=n.split(",");var r=[];var s=[];for(i in ads.anuncios){var o=ads.anuncios[i];if(anuncioValido(o)){if(coincideAlguno(o.tags,arrTags)){r.push(o)}if(coincideAlguno(o.categorias,arrCategs)){s.push(o)}}}if(r.length>0){mostrarAnuncio(elegirElementoAlAzar(r),e)}else if(s.length>0){console.log("No hay tags coincidentes. Usando categorías.");mostrarAnuncio(elegirElementoAlAzar(s),e)}else{console.log("No hay anuncios disponibles para esta página");return}}function arrayAMinusculas(e){for(i in e){if(typeof e[i]=="string")e[i]=e[i].toLowerCase()}}function coincideAlguno(e,t){arrayAMinusculas(e);arrayAMinusculas(t);for(i in e){if(t.indexOf(e[i])>=0)return true}return false}function elegirElementoAlAzar(e){if(e.length==0)return e[0];var t=Math.floor(Math.random()*e.length);return e[t]}function anuncioValido(e){if(!e.tipo)return false;if(!(e.tags||e.categorias))return false;switch(e.tipo){case"img":if(e.url&&e.action)return true;else return false;break;case"txt":if(e.texto&&e.action)return true;else return false;break;case"iny":if(e.url)return true;else return false;break;default:return false}}function mostrarAnuncio(e,t){console.log("Mostrando anuncio: "+e.nombre);var n=document.getElementById(t);if(n==null){console.error("No se ha encontrado el elemento '%s' en el que mostrar el anuncio",t);return}switch(e.tipo){case"img":if(EVENTOS_ANALYTICS_ACTIVADOS)n.innerHTML="<a href='"+e.action+"' target=_blank onclick=\"_gaq.push(['_trackEvent', '"+CATEGORIA_ANALYTICS+"', '"+e.action+"', '"+e.nombre+"', '1']);\"><img style='border:0;' src='"+e.url+"'></a>";else n.innerHTML="<a href='"+e.action+"' target=_blank><img style='border:0;' src='"+e.url+"'></a>";break;case"txt":if(EVENTOS_ANALYTICS_ACTIVADOS)n.innerHTML="<a href='"+e.action+"' target=_blank onclick=\"_gaq.push(['_trackEvent', '"+CATEGORIA_ANALYTICS+"', '"+e.action+"', '"+e.nombre+"', '1']);\">"+e.texto+"</a>";else n.innerHTML="<a href='"+e.action+"' target=_blank>"+e.texto+"</a>";break;case"iny":var r=getUrl(e.url);n.innerHTML=r;break}n.style.display="block"}function getUrl(e){if(window.XMLHttpRequest){httpReq=new XMLHttpRequest}else{httpReq=new ActiveXObject("Microsoft.XMLHTTP")}if(httpReq!=null){httpReq.open("GET",e,false);httpReq.send(null);if(httpReq.readyState==4){if(httpReq.status==200){return httpReq.responseText}else{console.log("No se pudo recuperar la información del archivo - "+httpReq.statusText)}}}}var CATEGORIA_ANALYTICS="Anuncios Contenido Recursos";var EVENTOS_ANALYTICS_ACTIVADOS=true